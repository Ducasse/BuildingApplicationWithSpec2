language: smalltalk
sudo: false
os:
- linux
smalltalk:
- Pharo-7.0
env:
  matrix:
  - JOB=test TYPE=System ARCHETYPE=book OUTPUT=pdf
  global:
    secure: EdSMCQMJIQUSND0vzOG8ENIxM5QxOqLD24TTowbCs/1qYBjnjoE3P109exORXWNGboZkuGw4BTDTjbDKLCETEqJTsHcjzu+kdvMCzkqSa5hojydp7aVOt9sPfrYHoNx4flKH5xP5QQtlIm7cnontMWlgVMm/g1BAkfHtF01q8mytz7nchM3tIN94ZxqLGGFizaX3gG2CqNbrSzC3QsQZUUFjPRJA70PSJd538KhdJGcmb7N3d2dKAu1HyEOLGRWuK+qiNIZxXxHIl9viqxZFcEEhhO7zESkELnyeOcw49NV3JeaWQonZHZbHGUR1bHEjJBl38ArddiYKa7saraUfPukxOuv6S1rFcMPR3cu/3OUp9LgenyKUpaWkCULuP5uCjj4tVSE69ckIjka7y35EFDpQwb/iaHMTDsZP4aMBZUJNpktUWEaHjyveuzl1KydWKiJz1KgwgN731r63hmsbg6Xd4EHlTs+TFPvEk1Swdj5u/jVnfOVTh5I+PXrlLi6pbtyqXZlTNeOKqnf5JS0NR/ITam5vyX9OALPRiQNzvCKDyJqW2s18CYbbPYive62GKbn6FkMUjeFJrnkLmYUCOs40HJsS6J1OAndUjfkGwiRXe4LshrA/2s+SlqBcsNPDCBymYcrs1pK/tlKFfFsTQPZnaoA5E1r0lsUziNEHcrk=
install:
- git clone https://github.com/pillar-markup/pillar.git -b v7.4.1
- cd pillar && ./scripts/build.sh && cd ..
- ". pillar/scripts/ci/ensure_latex.sh"
- "./pillar/scripts/ci/ensure_book_dependencies.sh"
script:
- "./pillar/build/pillar build pdf"
after_success:
- wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
- mv _result/pdf/index.pdf Spec20-wip.pdf
- bash upload.sh Spec20-wip.pdf
branches:
  except:
  - "/^(?i:continuous)$/"
