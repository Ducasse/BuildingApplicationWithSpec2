TestCase subclass: #FilmListPresenterTest	instanceVariableNames: 'presenter'	classVariableNames: ''	package: 'Spec2-TutorialOne'!!FilmListPresenterTest methodsFor: 'tests' stamp: 'cd 4/13/2022 09:36'!testWhenSelectingOneFilmThenDetailIsUpdated	| detail |	"Arrange"	presenter := ImdbFilmListPresenter new.	presenter open.	detail := presenter detail.	self assert: detail name isEmpty.	"Act"	presenter clickFilmAtIndex: 1.	"Assert"	self deny: detail name isEmpty.! !!FilmListPresenterTest methodsFor: 'tests' stamp: 'cd 4/13/2022 09:59'!testListIsSimpleSelection	presenter := ImdbFilmListPresenter new.		presenter open.		self deny: presenter filmList isMultipleSelection.! !!FilmListPresenterTest methodsFor: 'tests' stamp: 'cd 4/13/2022 09:43'!testWhenSelectingOneFilmAndClickingOnEmpty	| name |	"Arrange"	presenter := ImdbFilmListPresenter new.	presenter open.	"Act"	presenter clickFilmAtIndex: 1.	"Assert"	name := presenter detail name.	self deny: name isEmpty. 	self assert: presenter filmList listSize equals: 1.	presenter clickFilmAtIndex: 2.	self assert: presenter detail name equals: name! !!FilmListPresenterTest methodsFor: 'running' stamp: 'cd 4/13/2022 09:36'!tearDown	presenter ifNotNil: [ presenter delete ].	super tearDown. ! !!FilmListPresenterTest methodsFor: 'running' stamp: 'cd 4/13/2022 09:32'!setUp	super setUp. 	ImdbFilm reset. 	ImdbFilm addET.! !SpApplication subclass: #ImdbApp	instanceVariableNames: ''	classVariableNames: ''	package: 'Spec2-TutorialOne'!!ImdbApp methodsFor: 'initialization' stamp: 'cd 4/13/2022 11:15'!initialize 	super initialize.	self		useBackend: #Morphic 		with: ImdbConfiguration new.! !SpMorphicConfiguration subclass: #ImdbConfiguration	instanceVariableNames: ''	classVariableNames: ''	package: 'Spec2-TutorialOne'!!ImdbConfiguration methodsFor: 'instance creation' stamp: 'cd 4/13/2022 11:30'!newStyleSheet	^ SpStyle defaultStyleSheet copy, self customStyleSheet! !!ImdbConfiguration methodsFor: 'styling' stamp: 'cd 4/13/2022 11:32'!customStyleSheet	^ (SpStyleVariableSTONReader fromString: '.application [        	   .customLabel [ Draw { #color: #red } ] ]	')! !Object subclass: #ImdbFilm	instanceVariableNames: 'name year director'	classVariableNames: ''	package: 'Spec2-TutorialOne'!!ImdbFilm methodsFor: 'accessing' stamp: 'cd 4/13/2022 08:21'!name	^ name! !!ImdbFilm methodsFor: 'accessing' stamp: 'cd 4/13/2022 08:21'!year	^ year! !!ImdbFilm methodsFor: 'accessing' stamp: 'cd 4/13/2022 08:21'!year: anObject	year := anObject! !!ImdbFilm methodsFor: 'accessing' stamp: 'cd 4/13/2022 08:21'!director	^ director! !!ImdbFilm methodsFor: 'accessing' stamp: 'cd 4/13/2022 08:21'!name: anObject	name := anObject! !!ImdbFilm methodsFor: 'accessing' stamp: 'cd 4/13/2022 08:21'!director: anObject	director := anObject! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ImdbFilm class	instanceVariableNames: 'films'!!ImdbFilm class methodsFor: 'data' stamp: 'cd 4/13/2022 09:31'!ET	^ self new 		name: 'E.T.';		director: 'Steven Spielberg';		year: '1982'; 		yourself! !!ImdbFilm class methodsFor: 'initialization' stamp: 'cd 4/13/2022 09:31'!reset 	films := OrderedCollection new! !!ImdbFilm class methodsFor: 'accessing' stamp: 'cd 4/12/2022 15:53'!films	^ films ifNil: [ films := OrderedCollection new ]! !!ImdbFilm class methodsFor: 'accessing' stamp: 'cd 4/12/2022 15:53'!addFilm: aFilm	films add: aFilm! !!ImdbFilm class methodsFor: 'adding' stamp: 'cd 4/13/2022 09:31'!addET	films add: self ET! !SpPresenter subclass: #ImdbFilmListPresenter	instanceVariableNames: 'filmList detail'	classVariableNames: ''	package: 'Spec2-TutorialOne'!!ImdbFilmListPresenter methodsFor: 'testing - support' stamp: 'cd 4/13/2022 09:42'!filmList	^ filmList! !!ImdbFilmListPresenter methodsFor: 'testing - support' stamp: 'cd 4/13/2022 09:26'!clickFilmAtIndex: anIndex 	filmList clickAtIndex: anIndex! !!ImdbFilmListPresenter methodsFor: 'testing - support' stamp: 'cd 4/13/2022 09:25'!detail	^ detail! !!ImdbFilmListPresenter methodsFor: 'initialization' stamp: 'cd 4/13/2022 10:13'!defaultInputPort	^ self inputModelPort! !!ImdbFilmListPresenter methodsFor: 'initialization' stamp: 'cd 4/13/2022 11:32'!initializePresenters	filmList := self newTable		addColumn: (SpStringTableColumn title: 'Name' evaluated: #name);		addColumn: (SpStringTableColumn title: 'Director' evaluated: #director);		addColumn: (SpStringTableColumn title: 'Year' evaluated: #year);		yourself.			detail := self instantiate: ImdbFilmPresenter.	self updatePresenter! !!ImdbFilmListPresenter methodsFor: 'initialization' stamp: 'cd 4/12/2022 15:59'!initializeWindow: aWindowPresenter	aWindowPresenter		title: 'Mini IMDB';		initialExtent: 600 @ 400;		toolbar: (self newToolbar				 add: (self newToolbarButton						  label: 'Add film';						  icon: (self iconNamed: #smallAdd);						  action: [ self addFilm ];						  yourself);				 yourself)! !!ImdbFilmListPresenter methodsFor: 'initialization' stamp: 'cd 4/12/2022 15:57'!updatePresenter		filmList items: ImdbFilm films! !!ImdbFilmListPresenter methodsFor: 'initialization' stamp: 'cd 4/13/2022 09:12'!connectPresenters	filmList whenSelectionChangedDo: [ :selectedItemMode | 		selectedItemMode isEmpty ifFalse: [ detail setModel: selectedItemMode selectedItem ] ].! !!ImdbFilmListPresenter methodsFor: 'initialization' stamp: 'cd 4/13/2022 10:14'!inputModelPort	^ SpModelPort newPresenter: self! !!ImdbFilmListPresenter methodsFor: 'adding' stamp: 'cd 4/13/2022 08:50'!addFilm	| dialog windowPresenter |	dialog := ImdbFilmPresenter newApplication: self application.	windowPresenter := dialog openModal.	windowPresenter isOk		ifFalse: [ ^ self ].	ImdbFilm		addFilm:			(ImdbFilm new				name: dialog name;				director: dialog director;				year: dialog yearNumber).	self updatePresenter! !!ImdbFilmListPresenter methodsFor: 'layout' stamp: 'cd 4/13/2022 09:02'!defaultLayout	^ SpBoxLayout newTopToBottom		  add: filmList;		  add: detail;		  yourself! !!ImdbFilmListPresenter methodsFor: 'layout' stamp: 'cd 4/13/2022 10:03'!listOnlyLayout	^ SpBoxLayout newTopToBottom		  add: filmList;		  yourself! !!ImdbFilmListPresenter methodsFor: 'layout' stamp: 'cd 4/13/2022 10:01'!listAboveLayout	^ SpBoxLayout newTopToBottom			add: detail;			add: filmList; 			yourself! !SpPresenter subclass: #ImdbFilmPresenter	instanceVariableNames: 'nameText directorText yearNumber nameLabel'	classVariableNames: ''	package: 'Spec2-TutorialOne'!!ImdbFilmPresenter methodsFor: 'accessing' stamp: 'cd 4/13/2022 08:48'!name	^ nameText text! !!ImdbFilmPresenter methodsFor: 'accessing' stamp: 'cd 4/13/2022 08:24'!yearNumber	^ yearNumber text! !!ImdbFilmPresenter methodsFor: 'accessing' stamp: 'cd 4/13/2022 08:48'!director	^ directorText text! !!ImdbFilmPresenter methodsFor: 'initialization' stamp: 'cd 4/13/2022 09:03'!setModel: aFilm	nameText text: aFilm name.	directorText text: aFilm director.	yearNumber number: aFilm year.! !!ImdbFilmPresenter methodsFor: 'initialization' stamp: 'cd 4/13/2022 11:29'!initializePresenters	nameLabel := self newLabel 		label: 'Name'; 		addStyle: 'customLabel'; 		yourself.	nameText := self newTextInput.	directorText := self newTextInput.	yearNumber := self newNumberInput 				rangeMinimum: 1900 maximum: Year current year;				yourself.! !!ImdbFilmPresenter methodsFor: 'initialization' stamp: 'cd 4/13/2022 08:08'!initializeWindow: aWindowPresenter	aWindowPresenter		title: 'Film';		initialExtent: 400 @ 250! !!ImdbFilmPresenter methodsFor: 'initialization' stamp: 'cd 4/13/2022 08:54'!initializeDialogWindow: aDialogPresenter	aDialogPresenter centered.	aDialogPresenter 		addButton: 'Cancel' do: [ :presenter | presenter close ];		addButton: 'Save Film' do: [ :presenter | presenter beOk; close ].! !!ImdbFilmPresenter methodsFor: 'layout' stamp: 'cd 4/13/2022 11:20'!defaultLayout		^ SpGridLayout build: [ :builder |		builder			beColumnNotHomogeneous;			column:2 withConstraints: #beExpand;			add: nameLabel; add: nameText; nextRow;			add: 'Director'; add: directorText; nextRow;			add: 'Year'; add: yearNumber ]! !